# 计算机网络
## 1 计算机网络介绍
### 1.1 计算机网络基本概念
**计算机网络**：通信技术+计算机技术，即是一种通信网络；是<font color=pink>互连</font>的，<font color=pink>自治</font>的计算机集合
- 自治：无主从关系
- 互连：互联互通

通过交换网络互连主机（交换节点：路由器或交换机）

**通信系统模型**：
[![ppEfCY4.png](https://s1.ax1x.com/2023/03/05/ppEfCY4.png)](https://imgse.com/i/ppEfCY4)


**Internet**：
- 全球最大的互联网络，**ISP(Internet Service Provider)**,即“网络之网络”
- 千万计算设备之集合
- 通信链路
- 分组交换：转发分组；路由器和交换机
- 同行基础设施
- 网络应用编程接口 API
- 以及“**协议**”
  
**协议**：是为进行网络中的数据交换而建立的规则、标准或约定；规定了通信实体之间所交换的消息的格式、意义、顺序，以及针对收到信息或发生的事件所采取的
动作

协议的三要素：
- 语法（Syntax）
- 语义（Semantics）
- 时序（Timing）

**计算机网络的分类：**
- 按照网络覆盖范围：
  
  - 个人区域网PAN
  - 局域网LAN
  - 城域网MAN
  - 广域网WAN
- 按照网络使用者：

  - 专用网
  - 公共网
- 按照网络拓扑：

  - 总线网络
  - 星型网络
  - 树形网络
  - 网状网路

### 1.2 计算机网络结构
**网络边缘**：主机+网络应用  
**接入网络，物理介质**：有线/无线通信链路  
**网络核心**：
- 互联网的路由器（或者分组转发设备）
- 网络之网络

#### 1.2.1 网络边缘
- 主机（端系统）：位于网络边缘，运行网络应用程序
- 客户。服务器（client/server）应用模型：客户发送请求，接收服务器响应
- 对等（peer-peer,P2P）应用模型：没用专用服务器，通信在对等实体间进行

#### 1.2.2 接入网络
- 数字用户线路 DSL：利用已有的电话线连接中心局的DSLAM；

  - 数据通信通过DSL电话线接入internet
  - 语音电话通过DSL电话线接入电话网
  - FDM：即频分多路复用，将多路基带信号调制到不同频率载波上再进行叠加形成一个复合信号的多路复用技术，不同的频率区间用于不同作用（上行，下行，传统电话）
- 电缆网络（有线电视）：
  
  - 频分多路复用
  - HFC：混合光纤同轴电缆，上下行速率非对称
  - 各家庭共享至电缆头端的截图网，不同于DSL独占至中心局的接入
  - 光纤到户 FTTH：分为有缘光纤网络AON和无源光纤网络PON，贷款大线路稳定
- 机构（企业）接入网络 Ethernet：端系统通常直接连接以太网交换机
- 无线接入网络：通过基站机型接入，共享无线接入网络
  
  - 无线局域网LANS
  - 广域无线接入

#### 1.2.3 网络核心
网络核心：即互联的路由器网络  
其关键功能为：
- 路由（routing）：确定分组从源到目的的传输路径；路由算法
- 转发（forwarding）：将分组从路由器的输入端口交换至正确的输出端口

其解决的基本问题就是：通过数据交换，实现数据从源主机经过网络核心到达目的主机

[![ppE45ex.png](https://s1.ax1x.com/2023/03/05/ppE45ex.png)](https://imgse.com/i/ppE45ex)

### 1.3 数据交换
数据交换分为：电路交换，报文交换，分组交换

#### 1.3.1 电路交换（circuit switch）
- 最典型的：电话网络
- 分为三个阶段：建立连接(呼叫\电路连接)$\rightarrow$通信$\rightarrow$释放连接
- 独占资源
- 通过多路复用来共享中继栈：频分复用 FDM，时分复用 TDM

[![ppE5Zmq.png](https://s1.ax1x.com/2023/03/05/ppE5Zmq.png)](https://imgse.com/i/ppE5Zmq)

#### 1.3.2 报文交换（message switch）
报文：源（应用）发送信息整体

报文交换：存储接收到的报文，判断其目标地址以选择路由，最后，在下一跳路由空闲时，将数据转发给下一跳路由

#### 1.3.3 分组交换（package switch）
**分组**：将报文分拆为一系列相对较小的数据包

分组交换需要报文的拆分和重组，会产生额外的开销

**报文交换**和**分组交换**均采用**存储-转发**交换方式，前者以完整报文进行交换，后者分组交换

**传输时延：**
才分为较小长度为L bits的分组，在传输速率为R bits/sec的链路上传输分组，则：
$$
\text{时延}\left( delay \right) =\frac{L}{R}\ \left( \sec \right) 
$$
**分组交换的总报文交付时间：**

[![ppEInKA.png](https://s1.ax1x.com/2023/03/05/ppEInKA.png)](https://imgse.com/i/ppEInKA)

分组交换允许更多用户同时使用网络 ——— 网络资源充分共享
### 1.4 计算机网络性能指标
- **速率**：即数据率（data rate）或称数据传输速率或比特率（bit rate），往往指额定速率或标称速率
- **带宽（bandwide）**：原本指信号具有的频带宽度，即最高与最低频率之差；网络的“带宽”通常是指数字信道所能传送的“最高数据率”，单位为bps
- **延迟/时延（delay/latency）**：分组到达速率超出输出链路的容量；四种分组时延：
  
  - $d_{proc}:$ 节点处理延迟
  - $d_{queue}:$ 排队延迟
  
    [![ppETqEt.png](https://s1.ax1x.com/2023/03/05/ppETqEt.png)](https://imgse.com/i/ppETqEt) 
  - $d_{trans}:$ 传输延迟，$d_{trans}=\frac{L}{R}$
  - $d_{prop}:$ 传播延迟
    
    - d：物理链路长度
    - s：信号传播速度（~ $2*10^8m/s$）
    - $d_{prop}=d/s$ 
  - $d_{nodal}=d_{proc}+d_{queue}+d_{trans}+d_{prop}$

- **时延带宽积**：以比特为单位的链路长度
$$\text{时延带宽积}=\text{传播时延*带宽}$$
$$=d_{prop}*R\left( bits \right) $$
- **往返时间 RTT**：从发送方发送完数据，到发送方阶导确认分组数据所经历的时间
  
  [![ppE7rPf.png](https://s1.ax1x.com/2023/03/05/ppE7rPf.png)](https://imgse.com/i/ppE7rPf)

- **利用率**：
  
  [![ppE7gMQ.png](https://s1.ax1x.com/2023/03/05/ppE7gMQ.png)](https://imgse.com/i/ppE7gMQ) 

- **分组丢失（丢包）**：
  
  - 队列缓存容量有限
  - 分组到达时对吗即将被丢弃
  - 丢弃分组可能又前序节点或源重发
  
$$
    \text{丢包率}=\frac{\text{丢包数}}{\text{已发分组总数}}
$$

- **吞吐量/率（Throughput）**：表示在发送端与接收端之间传送数据的速率（b/s）
  
  - 即时吞吐量
  - 平均吞吐量
  - 瓶颈链路 ：计算吞吐量时，取链路上的最小值

### 1.5 计算机网络体系结构
**计算机网络许多组成成分**：主机（hosts），路由器（routers），各种链路（links），应用（applications），协议（protocols），软硬件，...

用何种体系结构有效描述网络？——— 分层结构

[![ppEbEX4.png](https://s1.ax1x.com/2023/03/05/ppEbEX4.png)](https://imgse.com/i/ppEbEX4)

**OSI参考模型**：

[![ppEbl9K.png](https://s1.ax1x.com/2023/03/05/ppEbl9K.png)](https://imgse.com/i/ppEbl9K)

[![ppEb09f.png](https://s1.ax1x.com/2023/03/05/ppEb09f.png)](https://imgse.com/i/ppEb09f)

- **物理层**：接口特性，比特编码，数据率，比特同步，传输模式（单工，半双工，全双工）
- **数据链路层**：负责结点-结点数据传输，以组帧为单位，在枕头中增加端的物理地址来进行物理寻址；流量控制；差错控制，访问控制
- **网络层**：负责源主机到目的主机的数据分组传输；逻辑寻址；路由；转发
- **传输层**：负责源-目的（端-端）的（进程间）完整报文传输。分段与重组；SAP寻址；连接控制；流量控制；差错控制
- **会话层**：对话控制；同步；最“薄”的一层
- **表示层**：数据表示转化；加密/解密；压缩/解压
- **应用层**：支持用户通过用户代理（如浏览器）或网络接口使用网络服务

**TCP/IP 模型**

[![ppEqGGV.png](https://s1.ax1x.com/2023/03/05/ppEqGGV.png)](https://imgse.com/i/ppEqGGV)

**5层参考模型**

[![ppEqaqJ.png](https://s1.ax1x.com/2023/03/05/ppEqaqJ.png)](https://imgse.com/i/ppEqaqJ)

[![ppEqBI1.png](https://s1.ax1x.com/2023/03/05/ppEqBI1.png)](https://imgse.com/i/ppEqBI1)

[![ppEqrPx.png](https://s1.ax1x.com/2023/03/05/ppEqrPx.png)](https://imgse.com/i/ppEqrPx)